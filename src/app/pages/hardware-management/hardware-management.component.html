<div class="hardware-management p-6">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Hardware Management</h1>
    <p class="text-gray-600 dark:text-gray-400">Configure and monitor your POS hardware devices</p>
  </div>

  <!-- Tab Navigation -->
  <div class="border-b border-gray-200 dark:border-gray-700 mb-6">
    <nav class="-mb-px flex space-x-8">
      <button
        *ngFor="let tab of ['devices', 'print-jobs', 'alerts', 'logs']"
        (click)="selectedTab.set(tab)"
        [class]="selectedTab() === tab ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'"
        class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm capitalize"
      >
        {{ tab.replace('-', ' ') }}
      </button>
    </nav>
  </div>

  <!-- Devices Tab -->
  <div *ngIf="selectedTab() === 'devices'" class="space-y-6">
    <!-- Device Filters -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Device Type</label>
          <select 
            [(ngModel)]="deviceTypeFilter" 
            (ngModelChange)="deviceTypeFilter.set($event)"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
          >
            <option value="all">All Types</option>
            <option value="barcode_scanner">Barcode Scanner</option>
            <option value="receipt_printer">Receipt Printer</option>
            <option value="cash_drawer">Cash Drawer</option>
            <option value="label_printer">Label Printer</option>
            <option value="scale">Scale</option>
            <option value="customer_display">Customer Display</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Status</label>
          <select 
            [(ngModel)]="deviceStatusFilter"
            (ngModelChange)="deviceStatusFilter.set($event)"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
          >
            <option value="all">All Status</option>
            <option value="connected">Connected</option>
            <option value="disconnected">Disconnected</option>
            <option value="error">Error</option>
            <option value="maintenance">Maintenance</option>
          </select>
        </div>
        
        <div class="flex items-end">
          <button
            (click)="isAddingDevice.set(true)"
            class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors"
          >
            Add Device
          </button>
        </div>
      </div>
    </div>

    <!-- Add Device Form -->
    <div *ngIf="isAddingDevice()" class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
      <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Add New Device</h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Device Name</label>
          <input
            [(ngModel)]="newDeviceForm().name"
            type="text"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
            placeholder="Enter device name"
          >
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Device Type</label>
          <select
            [(ngModel)]="newDeviceForm().type"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
          >
            <option value="barcode_scanner">Barcode Scanner</option>
            <option value="receipt_printer">Receipt Printer</option>
            <option value="cash_drawer">Cash Drawer</option>
            <option value="label_printer">Label Printer</option>
            <option value="scale">Scale</option>
            <option value="customer_display">Customer Display</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Model</label>
          <input
            [(ngModel)]="newDeviceForm().model"
            type="text"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
            placeholder="Enter model number"
          >
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Manufacturer</label>
          <input
            [(ngModel)]="newDeviceForm().manufacturer"
            type="text"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
            placeholder="Enter manufacturer"
          >
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Connection Type</label>
          <select
            [(ngModel)]="newDeviceForm().connectionType"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
          >
            <option value="usb">USB</option>
            <option value="bluetooth">Bluetooth</option>
            <option value="network">Network</option>
            <option value="serial">Serial</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Initial Status</label>
          <select
            [(ngModel)]="newDeviceForm().status"
            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
          >
            <option value="disconnected">Disconnected</option>
            <option value="connected">Connected</option>
            <option value="error">Error</option>
            <option value="maintenance">Maintenance</option>
          </select>
        </div>
      </div>
      
      <div class="mt-6 flex justify-end gap-4">
        <button
          (click)="isAddingDevice.set(false)"
          class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
        >
          Cancel
        </button>
        <button
          (click)="addDevice()"
          class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
        >
          Add Device
        </button>
      </div>
    </div>

    <!-- Devices List -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let device of filteredDevices()" class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center gap-3">
            <span class="text-2xl">{{ getDeviceIcon(device.type) }}</span>
            <div>
              <h3 class="font-semibold text-gray-900 dark:text-white">{{ device.name }}</h3>
              <p class="text-sm text-gray-500 dark:text-gray-400">{{ device.type.replace('_', ' ') }}</p>
            </div>
          </div>
          <span [class]="'px-2 py-1 text-xs rounded-full ' + getStatusColor(device.status)">
            {{ device.status }}
          </span>
        </div>
        
        <div class="space-y-2 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">Model:</span>
            <span class="text-gray-900 dark:text-white">{{ device.model || 'N/A' }}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">Connection:</span>
            <span class="text-gray-900 dark:text-white">{{ device.connectionType }}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">Last Updated:</span>
            <span class="text-gray-900 dark:text-white">{{ formatDate(device.updatedAt) }}</span>
          </div>
        </div>
        
        <div class="mt-4 flex gap-2">
          <button
            *ngIf="device.status === 'disconnected'"
            (click)="connectDevice(device.id)"
            class="flex-1 bg-green-600 text-white py-2 px-3 rounded-lg hover:bg-green-700 transition-colors text-sm"
          >
            Connect
          </button>
          <button
            *ngIf="device.status === 'connected'"
            (click)="disconnectDevice(device.id)"
            class="flex-1 bg-gray-600 text-white py-2 px-3 rounded-lg hover:bg-gray-700 transition-colors text-sm"
          >
            Disconnect
          </button>
          <button
            (click)="selectedDevice.set(device)"
            class="flex-1 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 px-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm"
          >
            Configure
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Print Jobs Tab -->
  <div *ngIf="selectedTab() === 'print-jobs'" class="space-y-6">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Print Queue</h3>
      </div>
      
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Job ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Device</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Type</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Created</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <tr *ngFor="let job of printJobs()">
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">{{ job.id }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">{{ job.deviceId }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">{{ job.type }}</td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="flex items-center gap-1">
                  <span>{{ getPrintJobStatusIcon(job.status) }}</span>
                  <span class="text-sm text-gray-900 dark:text-white">{{ job.status }}</span>
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">{{ formatDate(job.createdAt) }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <button
                  *ngIf="job.status === 'failed'"
                  (click)="retryPrintJob(job.id)"
                  class="text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3"
                >
                  Retry
                </button>
                <button
                  *ngIf="job.status === 'queued' || job.status === 'printing'"
                  (click)="cancelPrintJob(job.id)"
                  class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"
                >
                  Cancel
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Alerts Tab -->
  <div *ngIf="selectedTab() === 'alerts'" class="space-y-6">
    <!-- Alert Filters -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
      <div class="flex items-center gap-4">
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Severity Filter:</label>
        <select
          [(ngModel)]="alertSeverityFilter"
          (ngModelChange)="alertSeverityFilter.set($event)"
          class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
        >
          <option value="all">All Severities</option>
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
          <option value="critical">Critical</option>
        </select>
      </div>
    </div>

    <!-- Alerts List -->
    <div class="space-y-4">
      <div *ngFor="let alert of filteredAlerts()" class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <div class="flex items-start justify-between">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-2">
              <span [class]="'px-2 py-1 text-xs rounded-full ' + getSeverityColor(alert.severity)">
                {{ alert.severity.toUpperCase() }}
              </span>
              <h3 class="font-semibold text-gray-900 dark:text-white">{{ alert.type.replace('_', ' ').toUpperCase() }}</h3>
              <span class="text-sm text-gray-500 dark:text-gray-400">{{ formatDate(alert.createdAt) }}</span>
            </div>
            <p class="text-gray-600 dark:text-gray-300 mb-2">{{ alert.message }}</p>
            <div class="text-sm text-gray-500 dark:text-gray-400">
              Device: {{ alert.deviceId }}<span *ngIf="alert.details"> | {{ alert.details }}</span>
            </div>
          </div>
          
          <div class="ml-4">
            <button
              *ngIf="!alert.isResolved"
              (click)="resolveAlert(alert.id)"
              class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm"
            >
              Resolve
            </button>
            <span *ngIf="alert.isResolved" class="text-green-600 dark:text-green-400 text-sm">
              Resolved by {{ alert.resolvedBy }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Logs Tab -->
  <div *ngIf="selectedTab() === 'logs'" class="space-y-6">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Hardware Logs</h3>
      </div>
      
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Timestamp</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Level</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Device</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Message</th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <tr *ngFor="let log of hardwareLogs()">
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">{{ formatDate(log.timestamp) }}</td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="'px-2 py-1 text-xs rounded-full ' + (log.level === 'error' ? 'bg-red-100 text-red-800' : log.level === 'warning' ? 'bg-yellow-100 text-yellow-800' : 'bg-blue-100 text-blue-800')">
                  {{ log.level }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white">{{ log.deviceId }}</td>
              <td class="px-6 py-4 text-sm text-gray-900 dark:text-white">{{ log.message }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>